--- 
title: "Recoding *Introduction to Mediation, Moderation, and Conditional Process Analysis*"
subtitle: "version 1.2.0"
author: "A Solomon Kurz"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
output: 
  bookdown::gitbook:
    split_bib: yes
documentclass: book
bibliography: bib.bib
biblio-style: apalike
csl: apa.csl
link-citations: yes
geometry:
  margin = 0.5in
urlcolor: blue
highlight: tango
header-includes:
  \usepackage{underscore}
  \usepackage[T1]{fontenc}
github-repo: ASKurz/recoding-Hayes-2018
twitter-handle: SolomonKurz
description: "This project is an effort to connect his Hayes's conditional process analysis work with the Bayesian paradigm. Herein I refit his models with my favorite R package for Bayesian regression, B端rkner's brms, and use the tidyverse for data manipulation and plotting."
---

# Welcome {-}

Andrew Hayes's [-@hayesIntroductionMediationModeration2018] text, [*Introduction to mediation, moderation, and conditional process analysis: A regression-based approach*](https://afhayes.com/introduction-to-mediation-moderation-and-conditional-process-analysis.html), has become a staple in social science graduate education. Hayes's work has been from a frequentist OLS perspective. This book is an effort to connect his work with the Bayesian paradigm. Herein I refit his models with my favorite [**R**](https://www.r-bloggers.com/why-use-r-five-reasons/) [@R-base] package for Bayesian regression, [Paul B端rkner](https://twitter.com/paulbuerkner)'s [**brms**](https://github.com/paul-buerkner/brms) [@R-brms; @burknerBrmsPackageBayesian2017; @burknerAdvancedBayesianMultilevel2018]. I also prefer data wrangling and plotting using the [**tidyverse**](http://style.tidyverse.org) [@R-tidyverse; @wickhamWelcomeTidyverse2019]. But to be clear, this project is not meant to stand alone. It's a supplement to the textbook.

The source code of the project is available [here](https://github.com/ASKurz/recoding_Introduction_to_Mediation_Moderation_and_Conditional_Process_Analysis). This project is powered by the great [Yihui Xie](https://twitter.com/xieyihui)'s [**bookdown** package](https://bookdown.org) [@R-bookdown; @xieBookdownAuthoringBooks2016], which makes it easy to turn **R** markdown files into HTML, PDF, and EPUB. You might also check out Xie, Allaire, and Grolemund's [-@xieMarkdownDefinitiveGuide2020] [*R markdown: The definitive guide*](https://bookdown.org/yihui/rmarkdown/).

## Why this? {-}

I'm not a statistician and I have no formal background in computer science. But I met a great [statistics mentor](https://pharmacy.olemiss.edu/blog/team/dr-john-p-bentley/) in grad school who was enthusiastic, knowledgeable, and very generous with his time. In one of his stats electives, we used Hayes's first edition text and I learned a lot in that semester.

Yet a large portion of my training has been out of the classroom, working with messy real-world data, and looking online for help. One of the great resources I happened on was [idre, the UCLA Institute for Digital Education](https://stats.idre.ucla.edu). They perform a variety of services, but I benefited the most from was their portfolio of [richly annotated textbook examples](https://stats.idre.ucla.edu/other/examples/). Their online tutorials are among the earliest inspirations for this project. More so than my old statistics seminar lecture notes, high-quality and freely-available resources like this are where most of my day-to-day data analysis skills come from. We need more resources like this.

Hayes's work has become influential in many corners of the academy, including my own--psychology. His PROCESS macro [-@hayesIntroductionMediationModeration2018] has been aimed at SPSS [@ibmcorporationIBMSPSSStatistics2020] and SAS [@SASIMLSoftware2020] users, which is understandable given their popularity in the social sciences. Over the past few years, I've moved away from proprietary programs like SPSS to **R**. **R** free, open source, and I find it a more flexible and useful tool for data analysis. In fairness, Hayes expanded his second edition to include **R** code, which is a great move forward. But his work is done from a frequentist OLS perspective and there have been a lot of exciting developments in the world of applied Bayesian statistics. If you're an **R** user and want to learn about Bayesian data analysis, I think B端rkner's [**brms**](https://github.com/paul-buerkner/brms) is the best package around. It's flexible, uses reasonably-approachable syntax, has sensible defaults, and offers a wide array of post-processing convenience functions. In addition, the **R** code in Hayes's second edition does not leverage the power of the [**tidyverse**](https://www.tidyverse.org). The purpose of this project is to connect Hayes's insights into regression with the Bayesian paradigm. We'll do so within the free and open-source **R** ecosystem, highlighting the Bayesian **brms** package, and using functions from the **tidyverse** and friends [e.g., [**tidybayes**](https://mjskay.github.io/tidybayes/index.html), @R-tidybayes] to streamline our code.

## My assumptions about you {-}

If you're looking at this project, I'm guessing you're either a graduate student or a post-graduate academic or researcher of some sort, which comes with the presumption you have at least a 101-level foundation in statistics. If you're rusty, check out Legler and Roback's free [-@leglerBroadeningYourStatistical2019] text, [Broadening your statistical horizons: Generalized linear models and multilevel models*](https://bookdown.org/roback/bookdown-bysh/) or Navarro's free [-@navarroLearningStatistics2019] text, [*Learning statistics with R*](https://learningstatisticswithr.com/). I'm also presuming you are at least vaguely familiar with Bayesian statistics. For those totally new to Bayesian regression and HMC estimation, look at B端rkner's [-@burknerBrmsPackageBayesian2017] [paper](https://cran.r-project.org/web/packages/brms/vignettes/brms_overview.pdf), watch a few of [these engaging lectures](https://www.youtube.com/channel/UCNJK6_DZvcMqNSzQdEkzvzA/playlists), or even start with either of my [-@kurzStatisticalRethinkingBrms2020; -@kurzStatisticalRethinkingSecondEd2021] books based on the two [-@mcelreathStatisticalRethinkingBayesian2015; -@mcelreathStatisticalRethinkingBayesian2020] editions of McElreath's [*Statistical rethinking*](https://xcelab.net/rm/statistical-rethinking/). I'm also presuming a basic working fluency in **R** and a vague idea about what the **tidyverse** is. If you're totally new to **R**, consider starting with Peng's [-@pengProgrammingDataScience2019] [*R programming for data science*](https://bookdown.org/rdpeng/rprogdatascience/). And the best introduction to the **tidyvese**-style of data analysis I've found is Grolemund and Wickham's [-@grolemundDataScience2017] [*R for data science*](https://r4ds.had.co.nz).

That said, you do not need to be totally fluent in statistics or **R**. Otherwise why would you need this project, anyway? IMO, the most important things are curiosity, a willingness to try, and persistent tinkering. I love this stuff. Hopefully you will, too.

## How to use and understand this project {-}

This project is not meant to stand alone. It's a supplement to the second edition of [Hayes's text](http://afhayes.com/introduction-to-mediation-moderation-and-conditional-process-analysis.html). I follow the structure of his text, chapter by chapter, translating his analyses into **brms** and **tidyverse** code. However, many of the sections in the text are composed entirely of equations and prose, leaving us nothing to translate. When we run into those sections, the corresponding sections in this project will be sparse or blank. I imagine students might reference this project as they progress through Hayes's text. I also imagine working data analysts might use this project in conjunction with Hayes's text as they flip to the specific sections that seem relevant to solving their data challenges. 

I reproduce the bulk of the figures in the text, too. The plots in the first few chapters are the closest to those in the text. However, I'm passionate about data visualization and like to play around with [color palettes](https://github.com/EmilHvitfeldt/r-color-palettes), formatting templates, and other conventions quite a bit. As a result, the plots in each chapter have their own look and feel. I also like to highlight some of the unique strengths Bayesian analyses brings to the table, such as the ease with which you can depict uncertainty with density plots, interval ribbons around regression lines, and spaghetti plots. For more on some of these topics, chapters [3](http://r4ds.had.co.nz/data-visualisation.html), [7](http://r4ds.had.co.nz/exploratory-data-analysis.html), and [28](http://r4ds.had.co.nz/graphics-for-communication.html) in *R4DS*, Healy's [-@healyDataVisualization2018] [*Data visualization: A practical introduction*](https://socviz.co), or Wickham's [-@wickhamGgplot2ElegantGraphics2016] [*ggplot2: Elegant graphics for data analysis*](https://ggplot2-book.org/).

In this project, I use a handful of formatting conventions gleaned from [*R4DS*](http://r4ds.had.co.nz/introduction.html#running-r-code) and [*R markdown: The definitive guide*](https://bookdown.org/yihui/rmarkdown/software-info.html). 

* I put **R** and **R** packages (e.g., **tidybayes**) in **boldface**.
* **R** code blocks and their output appear in a gray background. E.g., 

```{r}
2 + 2
```

* Functions are in a typewriter font and followed by parentheses, all atop a gray background (e.g., `brm()`).
* When I want to make explicit what packages a given function comes from, I insert the double-colon operator `::` between the package name and the function (e.g., `brms::fitted()`).
* **R** objects, such as data or function arguments, are in typewriter font atop a gray background (e.g., `d` or `size = 2`).
* Hyperlinks are denoted by their typical [blue-colored font](https://www.afhayes.com/introduction-to-mediation-moderation-and-conditional-process-analysis.html).

## Times change and so do we {-}

For a brief rundown of the version history, we have:

### 1.0.0. {-}

I released the 1.0.0 version of this book in July of 2018. It was a complete first draft.

### 1.1.0. {-}

In December 21, 2019, came the 1.1.0 update. It included a lot of changes, the most notable of which were that,

* all models were refit with **brms** 2.10.3,
* the introduction to Bayesian information criteria reflected the updates introduced in **brms** 2.10.0,
* I updated the multivariate model code with the `mvbind()` and `mvbf()` functions,
* I made greater use of the handy **tidybayes** package for post-processing models,
* I updated and simplified a lot of the **tidyverse** code,
* all fit objects were assigned sequential names and were saved in `.rda` files in the [`fits` folder](https://github.com/ASKurz/recoding-Hayes-2018/tree/master/fits) on GitHub,
* I substantially increased the amount of Hayes quotes,
* I added more statistical formulas throughout the text,
* I added a version of Chapter 14, which includes warnings about relying on cross-sectional mediation, and
* the various **R** objects were assigned simpler and more standardized names.

### 1.2.0. {-}

Welcome to version 1.2.0! Noteworthy changes are that

* all models have been refit with **brms** 2.15.0;
* we have updated the in-text citations and reference sections using [BibTex](http://www.bibtex.org/) [@BibTeX2020], [Better BibTeX](https://github.com/retorquere/zotero-better-bibtex) [@heynsBetterBibTeXZotero2020], and [zotero](https://www.zotero.org/) [@ZoteroYourPersonal2020];
* I fixed code breaks due to various updates in the **tidyverse** packages; and
* I fixed a handful of typos and other small gaffes.

### What's next? {-}

It's unclear what future versions of this book may hold. Candidates include

* more talk about model priors,
* examples of multilevel mediation,
* examples of longitudinal mediation, and
* sterner warnings against cross-sectional mediation.

We'll see. In the meantime, feel free to make suggestions or report typos and coding goofs at [https://github.com/ASKurz/recoding-Hayes-2018/issues](https://github.com/ASKurz/recoding-Hayes-2018/issues).

## Thank-you's are in order {-}

Before we move on, I'd like to thank the following for their helpful contributions:

* Jose Storopoli ([\@storopoli](https://github.com/storopoli))

For information on how you might help improve this ebook, go to [https://github.com/ASKurz/recoding-Hayes-2018/blob/master/CONTRIBUTING.md](https://github.com/ASKurz/recoding-Hayes-2018/blob/master/CONTRIBUTING.md).

## License and citation {-}

This book is licensed under the Creative Commons Zero v1.0 Universal license. You can learn the details, [here](https://github.com/ASKurz/recoding-Hayes-2018/blob/master/LICENSE). In short, you can use my work. Just make sure you give me the appropriate credit the same way you would for any other scholarly resource. Here's the citation information:

```{r, eval = F}
@book{kurzRecodingIntroduction2021,
  title = {Recoding {{Introduction to Mediation, Moderation, and Conditional Process Analysis}}},
  author = {Kurz, A. Solomon},
  year = {2021},
  month = {aug},
  edition = {version 1.2.0},
  url = {https://bookdown.org/ajkurz/recoding_Hayes_2018/}
}
```

